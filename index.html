<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My WebGL Game</title>

  <!-- iOS standalone fullscreen -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no">

  <style>
    html, body { margin:0; height:100%; overflow:hidden; background:#000; touch-action:none; }
    #container  { position:fixed; inset:0; padding:env(safe-area-inset-top) env(safe-area-inset-right)
                                     env(safe-area-inset-bottom) env(safe-area-inset-left); }
    #unity-canvas { width:100% !important; height:100% !important; display:block; background:#000; }
  </style>
</head>
<body>
  <div id="container"><canvas id="unity-canvas"></canvas></div>

  <script>
    // Prevent iOS elastic scroll from revealing Safari UI
    document.addEventListener('touchmove', e => e.preventDefault(), { passive: false });

    // === Set this to the part before ".loader.js" ===
    const NAME = "Blood-Nobles";     // e.g. if you see "Build.loader.js", keep "Build"
    const buildUrl = "Build"; // folder name containing your files
    const loaderUrl = `${buildUrl}/${NAME}.loader.js`;
    const canvas = document.getElementById("unity-canvas");

    const modern = { data:`${NAME}.data.unityweb`, framework:`${NAME}.framework.js.unityweb`, wasm:`${NAME}.wasm.unityweb` };
    const legacy = { data:`${NAME}.data`,          framework:`${NAME}.framework.js`,          wasm:`${NAME}.wasm` };

    function makeConfig(files) {
      return {
        dataUrl:      `${buildUrl}/${files.data}`,
        frameworkUrl: `${buildUrl}/${files.framework}`,
        codeUrl:      `${buildUrl}/${files.wasm}`,
        streamingAssetsUrl: "StreamingAssets",
        companyName: "My Studio",
        productName: "My WebGL Game",
        productVersion: "1.0",
        devicePixelRatio: 1
      };
    }

    function loadWith(files) {
      return new Promise((resolve, reject) => {
        const s = document.createElement("script");
        s.src = loaderUrl;
        s.onload = () => createUnityInstance(canvas, makeConfig(files)).then(resolve).catch(reject);
        s.onerror = () => reject(new Error("Failed to load loader script: " + loaderUrl));
        document.body.appendChild(s);
      });
    }

    (async () => {
      try { await loadWith(modern); }
      catch { try { await loadWith(legacy); }
      catch (e) { alert(e.message || e); } }
    })();
  </script>
</body>
</html>
